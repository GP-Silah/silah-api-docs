{
  "openapi": "3.0.0",
  "paths": {
    "/": {
      "get": {
        "deprecated": true,
        "description": "This is the default root endpoint generated by NestJS. It returns a static test message and is not part of the real Silah API.",
        "operationId": "AppController_getHello",
        "parameters": [],
        "responses": {
          "200": {
            "description": "A \"Hello, World!\" message.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "example": "Hello, World!"
                }
              }
            }
          }
        },
        "summary": "Not a usable endpoint",
        "tags": [
          "Default"
        ]
      }
    },
    "/health": {
      "get": {
        "operationId": "HealthController_check",
        "parameters": [],
        "responses": {
          "200": {
            "description": "The Health Check is successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {},
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "The Health Check is not successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "info": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "error": {
                      "type": "object",
                      "example": {
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      },
                      "nullable": true
                    },
                    "details": {
                      "type": "object",
                      "example": {
                        "database": {
                          "status": "up"
                        },
                        "redis": {
                          "status": "down",
                          "message": "Could not connect"
                        }
                      },
                      "additionalProperties": {
                        "type": "object",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Check API health status",
        "tags": [
          "Health"
        ]
      }
    },
    "/auth/signup": {
      "post": {
        "operationId": "AuthController_signUp",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignupDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User signed up successfully. JWT sent in cookie.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Signup successful"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - validation or conflict",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "These categories are invalid or not main categories: 33, 44",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "NID already exists",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "CRN already exists",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Email already exists",
                        "error": "Bad Request"
                      }
                    }
                  ]
                },
                "examples": {
                  "categories": {
                    "summary": "Invalid Categories",
                    "value": {
                      "statusCode": 400,
                      "message": "These categories are invalid: Cleaning, Laundry",
                      "error": "Bad Request"
                    }
                  },
                  "nid": {
                    "summary": "NID already exists",
                    "value": {
                      "statusCode": 400,
                      "message": "NID already exists",
                      "error": "Bad Request"
                    }
                  },
                  "crn": {
                    "summary": "CRN already exists",
                    "value": {
                      "statusCode": 400,
                      "message": "CRN already exists",
                      "error": "Bad Request"
                    }
                  },
                  "email": {
                    "summary": "Email already exists",
                    "value": {
                      "statusCode": 400,
                      "message": "Email already exists",
                      "error": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Commercial Registration not found (from Wathiq API).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "code": "404.2.1",
                    "message": "No Results Found"
                  }
                },
                "examples": {
                  "crnNotFound": {
                    "summary": "CRN not found in Wathiq",
                    "value": {
                      "code": "404.2.1",
                      "message": "No Results Found"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Registers a new user and returns a JWT token in a cookie",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/login": {
      "post": {
        "description": "Either \"email\" or \"crn\" must be provided, but not both.",
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "type": "object",
                    "required": [
                      "email",
                      "password"
                    ],
                    "properties": {
                      "email": {
                        "type": "string",
                        "format": "email"
                      },
                      "password": {
                        "type": "string"
                      }
                    }
                  },
                  {
                    "type": "object",
                    "required": [
                      "crn",
                      "password"
                    ],
                    "properties": {
                      "crn": {
                        "type": "string"
                      },
                      "password": {
                        "type": "string"
                      }
                    }
                  }
                ],
                "$ref": "#/components/schemas/LoginDto"
              },
              "examples": {
                "loginWithEmail": {
                  "summary": "Login using email and password",
                  "value": {
                    "email": "user@example.com",
                    "password": "securePassword123"
                  }
                },
                "loginWithCrn": {
                  "summary": "Login using CRN and password",
                  "value": {
                    "crn": "1234567890",
                    "password": "securePassword123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User successfully logged in",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Login successful"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request – validation or authentication failure",
            "content": {
              "application/json": {
                "examples": {
                  "userNotFound": {
                    "summary": "The user does not exist in the system",
                    "value": {
                      "statusCode": 400,
                      "message": "User not found",
                      "error": "Bad Request"
                    }
                  },
                  "invalidCredentials": {
                    "summary": "The email or CRN exists, but the password is incorrect",
                    "value": {
                      "statusCode": 400,
                      "message": "Invalid credentials",
                      "error": "Bad Request"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Login user and send back JWT token as a cookie",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/logout": {
      "post": {
        "operationId": "AuthController_logout",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successfully logged out",
            "content": {
              "application/json": {
                "schema": {
                  "example": "Successfully logged out"
                }
              }
            }
          }
        },
        "summary": "Logout user by clearing token cookie",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/verify-email": {
      "post": {
        "description": "This endpoint should be called when the user clicks the verification button which is after clicking the link in their email.<br> So this endpoint should be called from the `/verify-email` route in the frontend, remember to pass the token as a query parameter (so the link will be `/verify-email?token=`).",
        "operationId": "AuthController_verifyEmail",
        "parameters": [
          {
            "name": "token",
            "required": true,
            "in": "query",
            "description": "JWT token from email link",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Email verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Email verified successfully"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid or expired token, or already verified",
            "content": {
              "application/json": {
                "examples": {
                  "userNotFound": {
                    "summary": "The user not found or already verified",
                    "value": {
                      "statusCode": 400,
                      "message": "User not found or already verified",
                      "error": "Bad Request"
                    }
                  },
                  "invalidCredentials": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "statusCode": 400,
                      "message": "Invalid or expired verification token",
                      "error": "Bad Request"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Verify user email using token",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/resend-verification-email": {
      "post": {
        "description": "This endpoint allows users to request a new verification email if they missed the original one or if the token expired. <br>If the you received \"Invalid or expired verification token\" error you should call this endpoint to resend the email. ",
        "operationId": "AuthController_resendVerificationEmail",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Email to resend verification to",
          "content": {
            "application/json": {
              "schema": {
                "example": {
                  "email": "example@email.com"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Verification email resent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Verification email resent successfully"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Email already verified",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Email already verified",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "User not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Resend verification email to user",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/request-password-reset": {
      "post": {
        "description": "This endpoint sends a password reset link to the user's email address.<br><br>\n            It is used in two cases:<br>\n            - If the user clicks the \"Forgot Password?\" button.<br>\n            - If the user previously requested a reset link but the 5-minute token has expired.<br><br>\n            Note: The token will only be sent if the email exists and is verified. For security reasons, we always return the same success message, regardless of whether the user exists or is verified.",
        "operationId": "AuthController_requestPasswordReset",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "The email address of the user who wants to reset their password.",
          "content": {
            "application/json": {
              "schema": {
                "example": {
                  "email": "user@example.com"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Reset password email sent successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Password reset email sent successfully"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Failed to send reset password email",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 500,
                    "message": "Failed to send reset password email"
                  }
                }
              }
            }
          }
        },
        "summary": "Request password reset link",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/reset-password": {
      "post": {
        "description": "This endpoint is used after the user clicks the password reset link from their email.<br><br>\n    It should be triggered from the frontend's `/reset-password` route.<br>\n    The token should be passed as a query parameter in the URL.<br><br>\n    The body must include a new password that is between 8 and 28 characters long.",
        "operationId": "AuthController_resetPassword",
        "parameters": [
          {
            "name": "token",
            "required": true,
            "in": "query",
            "description": "The JWT token sent in the reset password email. This must be passed as a query parameter.",
            "schema": {
              "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "The new password to set for the user account.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Password reset successfully"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid or expired token, or validation error in request body.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Invalid or expired reset password token"
                  }
                }
              }
            }
          },
          "404": {
            "description": "User not found (after token is verified).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "User not found"
                  }
                }
              }
            }
          }
        },
        "summary": "Reset user password using token",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/switch-role": {
      "patch": {
        "operationId": "AuthController_switchUserRole",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Token regenerated with updated role",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Role switched successfully",
                    "newRole": "SUPPLIER"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Unexpected role: GUEST should never reach this endpoint",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 500,
                    "message": "Unexpected role: GUEST should never reach this endpoint",
                    "error": "Internal Server Error"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Switch user role (BUYER ⇌ SUPPLIER)",
        "tags": [
          "Auth"
        ]
      }
    },
    "/users/email/{email}": {
      "get": {
        "description": "Fetches a single user using their email address.",
        "operationId": "UserController_getUserByEmail",
        "parameters": [
          {
            "name": "email",
            "required": true,
            "in": "path",
            "description": "Email address of the user",
            "schema": {
              "example": "example@email.com",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDTO"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "User not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get user by email",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/crn/{crn}": {
      "get": {
        "description": "Fetches a user using their unique CRN.",
        "operationId": "UserController_getUserByCRN",
        "parameters": [
          {
            "name": "crn",
            "required": true,
            "in": "path",
            "description": "Customer Registration Number of the user",
            "schema": {
              "example": "0123456789",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDTO"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "User not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get user by their CRN",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/name": {
      "get": {
        "description": "Returns a list of users that match the provided name.",
        "operationId": "UserController_getUserByName",
        "parameters": [
          {
            "name": "name",
            "required": true,
            "in": "query",
            "description": "Name (or partial name) to search users by",
            "schema": {
              "example": "Sarah",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Users found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserResponseDTO"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Name parameter is required",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No users found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "No users found with the name",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Search users by name",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/me": {
      "get": {
        "description": "Returns the currently authenticated user's data.",
        "operationId": "UserController_getCurrentUserData",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Current user data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDTO"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get current user",
        "tags": [
          "Users"
        ]
      },
      "patch": {
        "description": "Updates the currently authenticated user's profile information.",
        "operationId": "UserController_updateCurrentUserData",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "description": "User data to update (you don't have to not send all fields, only the ones you want to change will be updated).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseDTO"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "These categories are invalid: Hi, LOL",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "User not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Update current user",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/me/profile-picture": {
      "post": {
        "description": "Uploads a new profile picture for the authenticated user and updates their record. Replaces the previous picture if it exists.<br><strong>Note:</strong> The file must be an image (PNG, JPEG, WebP) and cannot exceed 5MB in size.<br><strong>IMPORTANT:</strong> Please ensure that uploaded images comply with Islamic laws. This means avoiding haram content such as music-related images, depictions of women's bodies (even hands), or any illustrations of living beings (humans, animals, etc.) whether drawn or digital.",
        "operationId": "UserController_updateProfilePicture",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Profile picture file to upload",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile picture updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Profile picture updated successfully",
                    "pfpFileName": "user-avatar/12345.png"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request. File missing or invalid format.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "No file provided or invalid file type",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "User not found or profile picture cannot be updated",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "User not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Update user profile picture",
        "tags": [
          "Users"
        ]
      },
      "delete": {
        "description": "Deletes the authenticated user's current profile picture and replaces it with a default avatar.",
        "operationId": "UserController_deleteProfilePicture",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Profile picture deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Profile picture deleted successfully"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "User not found or already has the default profile picture",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Profile picture not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Delete current user profile picture",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/me/preferred-language": {
      "patch": {
        "description": "Switches the authenticated user's preferred language between English (ENG) and Arabic (ARA). Returns the old and new preferred language.",
        "operationId": "UserController_switchPreferredLanguage",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User preferred language switched successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "email": "user@example.com",
                    "oldLanguage": "EN",
                    "newLanguage": "AR"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Toggle user preferred language",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/{id}/profile-picture": {
      "get": {
        "description": "Retrieves the URL of a user's profile picture that is stored on R2. Throws a 404 error if the user or their profile picture does not exist.",
        "operationId": "UserController_getUserProfilePictureUrl",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "ID of the user whose profile picture URL is being retrieved",
            "schema": {
              "example": "b4f2d8c1-9876-5432-10ba-2f3e4d5c6789",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Profile picture URL retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "pfpUrl": "https://cdn.example.com/pfp/USER_ID.jpeg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250101T000000Z&X-Amz-Expires=3600&X-Amz-Signature=REDACTED"
                  }
                }
              }
            }
          },
          "404": {
            "description": "User or profile picture not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Profile picture not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get user's profile picture URL",
        "tags": [
          "Users"
        ]
      }
    },
    "/users/profile-pictures/batch": {
      "post": {
        "description": "Retrieves the profile picture URLs for multiple users by their IDs. Only valid UUIDs are considered.",
        "operationId": "UserController_getUsersProfilePicturesUrls",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Array of user IDs to retrieve profile picture URLs for",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "example": [
                      "a3e1c9f0-1234-5678-90ab-1c2d3e4f5678",
                      "b4f2d8c1-9876-5432-10ba-2f3e4d5c6789"
                    ]
                  }
                },
                "required": [
                  "ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile picture URLs retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": [
                    {
                      "id": "a3e1c9f0-1234-5678-90ab-1c2d3e4f5678",
                      "pfpUrl": "https://cdn.example.com/pfp/USER_ID.jpeg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250101T000000Z&X-Amz-Expires=3600&X-Amz-Signature=REDACTED"
                    },
                    {
                      "id": "b4f2d8c1-9876-5432-10ba-2f3e4d5c6789",
                      "pfpUrl": null
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "No user IDs provided",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No users found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "No users found with the provided IDs",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get profile pictures for multiple users",
        "tags": [
          "Users"
        ]
      }
    },
    "/buyers/me": {
      "get": {
        "description": "Returns the currently authenticated buyer's user details and saved card information (if available).",
        "operationId": "BuyerController_getCurrentBuyerData",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Current buyer data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BuyerResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Buyer not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "User not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get current buyer data",
        "tags": [
          "Buyers"
        ]
      }
    },
    "/buyers/me/card": {
      "get": {
        "description": "Returns the saved card of the currently authenticated buyer. If the buyer has no card, returns `{ message: 'No card found', card: null }`.",
        "operationId": "BuyerController_getCurrentBuyerCard",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Buyer card retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CardDetailsDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No card found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "No card found",
                    "card": null
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get current buyer card",
        "tags": [
          "Buyers"
        ]
      },
      "put": {
        "description": "Creates or replaces the authenticated buyer's card using Tap tokenization.<br>If a card already exists, it will be deleted from Tap and replaced with the new one.",
        "operationId": "BuyerController_saveOrReplaceCurrentBuyerCard",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Card details provided from Tap tokenization",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCardDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Card saved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Card saved successfully",
                    "card": {
                      "id": "f1a2b3c4-d5e6-7890-ab12-34567890cdef",
                      "tapCardId": "card_abc123xyz",
                      "cardHolderName": "Norah Alqahtani",
                      "last4": "4242",
                      "brand": "Visa",
                      "expMonth": 12,
                      "expYear": 2028
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Invalid Tap token",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "User not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Save or replace current buyer card",
        "tags": [
          "Buyers"
        ]
      },
      "delete": {
        "description": "Deletes the authenticated buyer's saved card from Tap and the database.",
        "operationId": "BuyerController_deleteCurrentBuyerCard",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Card deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Card deleted successfully"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No card found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "No card found for this buyer",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Delete current buyer card",
        "tags": [
          "Buyers"
        ]
      }
    },
    "/buyers/me/wishlist": {
      "get": {
        "description": "Returns the wishlist items of the currently authenticated buyer. Each item can be a product or a service.",
        "operationId": "BuyerController_getWishlist",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Wishlist retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WishlistItemResponseDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Buyer not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Buyer not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get current buyer wishlist",
        "tags": [
          "Buyers"
        ]
      }
    },
    "/buyers/me/wishlist/{itemId}": {
      "patch": {
        "description": "Adds the item to the wishlist if it is not already there, or removes it if it exists. Returns the updated wishlist.",
        "operationId": "BuyerController_toggleWishlistItem",
        "parameters": [
          {
            "name": "itemId",
            "required": true,
            "in": "path",
            "description": "The ID of the product or service to toggle",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Item successfully added or removed from wishlist",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Item added to wishlist",
                    "isAdded": true,
                    "updatedWishlist": [
                      {
                        "itemId": "1234567890ab-cdef-1234-5678-abcdef123456",
                        "itemType": "PRODUCT",
                        "product": "See ProductResponseDto"
                      },
                      {
                        "itemId": "1234567890ab-cdef-1234-5678-abcdef654321",
                        "itemType": "SERVICE",
                        "service": "See ServiceResponseDto"
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid itemId",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Invalid item ID format",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Buyer or item not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Item not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Toggle an item in the buyer wishlist",
        "tags": [
          "Buyers"
        ]
      }
    },
    "/products": {
      "get": {
        "description": "Fetches all products. Optional query or header <strong>lang</strong> can be provided to translate product name and description.\n                <ul>\n                    <li>Header: <strong>accept-language</strong></li>\n                    <li>Query: <strong>lang</strong></li>\n                </ul>\n                If no language is provided, defaults to English.",
        "operationId": "ProductController_getAllProducts",
        "parameters": [
          {
            "name": "accept-language",
            "required": false,
            "in": "header",
            "description": "Optional header to specify target language for translation (ar or en)",
            "schema": {
              "type": "string",
              "enum": [
                "ar",
                "en"
              ]
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "description": "Target language for translation",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of products",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductResponseDto"
                  }
                }
              }
            }
          }
        },
        "summary": "Get all products",
        "tags": [
          "Products"
        ]
      },
      "post": {
        "description": "<strong>IMPORTANT:</strong> This endpoint requires sending the data as <u>multipart/form-data</u>.<br>\n                <strong>Note:</strong> Because this endpoint uses multipart/form-data, Swagger cannot directly show the CreateProductDto schema here. \n                There is a separate Swagger-only endpoint (GET /swagger-products-reference/create-product-dto) where you can view the full CreateProductDto schema and example.<br><br>\n                You must send two fields:\n                <ul>\n                    <li><strong>dto</strong> (type: text) → JSON string of the product details (see example below). \n                    <br>Check the Swagger-only endpoint for full schema reference.</li>\n                    <li><strong>files</strong> → one or more image files (PNG, JPEG, WebP, max 5MB each, 1 to 3 files)</li>\n                </ul>\n                Make sure the JSON string is properly formatted.<br><br>\n                Only subcategories can be assigned to products. Main categories are invalid.<br><br>\n                <strong>Note:</strong> The file must be an image (PNG, JPEG, WebP) and cannot exceed 5MB in size.<br>\n                <strong>IMPORTANT:</strong> Please ensure that uploaded images comply with Islamic laws. This means avoiding haram content such as music-related images, depictions of women's bodies (even hands), or any illustrations of living beings (humans, animals, etc.) whether drawn or digital.",
        "operationId": "ProductController_createProduct",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary",
                      "description": "Product images. 1 to 3 images allowed, formats: PNG, JPEG, WebP, max 5MB each."
                    }
                  },
                  "dto": {
                    "type": "string",
                    "description": "IMPORTANT: Must be a JSON string containing product details. The JSON structure should follow CreateProductDto format. Check the Swagger-only endpoint GET /swagger-products-reference/create-product-dto to see the full schema and example.",
                    "example": "{\"name\":\"Classic Wooden Hair Brush\",\"description\":\"Durable wooden hair brush with soft bristles, designed for daily styling and gentle scalp massage.\",\"price\":24.99,\"stock\":150,\"categoryId\":21,\"caseQuantity\":12,\"minOrderQuantity\":1,\"maxOrderQuantity\":10,\"allowGroupPurchase\":true,\"minGroupOrderQuantity\":5,\"groupPurchasePrice\":19.99,\"groupPurchaseDuration\":\"FIVE_DAYS\",\"isPublished\":true}"
                  }
                },
                "required": [
                  "files",
                  "dto"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request. Could be invalid JSON, missing fields, invalid category, or file issues.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Invalid JSON in form field OR Products must be assigned to a subcategory, not a main category OR At least one product image is required",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier or category not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Create a new product",
        "tags": [
          "Products"
        ]
      }
    },
    "/products/{productId}": {
      "get": {
        "description": "Fetches a single product by its ID. Optional query or header <strong>lang</strong> can be provided to translate product name and description.\n                <ul>\n                    <li>Header: <strong>accept-language</strong></li>\n                    <li>Query: <strong>lang</strong></li>\n                </ul>\n                If no language is provided, defaults to English.",
        "operationId": "ProductController_getProductById",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "accept-language",
            "required": false,
            "in": "header",
            "description": "Optional header to specify target language for translation (ar or en)",
            "schema": {
              "type": "string",
              "enum": [
                "ar",
                "en"
              ]
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "description": "Target language for translation",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Product not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Product with id 123 not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get product by ID",
        "tags": [
          "Products"
        ]
      },
      "patch": {
        "description": "Updates product fields (except images). Only the fields provided in the request body will be updated. Requires Supplier role.",
        "operationId": "ProductController_updateProduct",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProductDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated product details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request or invalid category",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Products must be assigned to a subcategory, not a main category",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Product or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Product not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Update a product",
        "tags": [
          "Products"
        ]
      },
      "delete": {
        "description": "Soft-deletes a product. Requires Supplier role.",
        "operationId": "ProductController_deleteProduct",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deletion confirmation",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Product deleted successfully"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Product or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Product not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Delete a product",
        "tags": [
          "Products"
        ]
      }
    },
    "/products/supplier/{supplierId}": {
      "get": {
        "description": "Fetches all products for a given supplier. Optional query or header <strong>lang</strong> can be provided to translate product name and description.\n                <ul>\n                    <li>Header: <strong>accept-language</strong></li>\n                    <li>Query: <strong>lang</strong></li>\n                </ul>\n                If no language is provided, defaults to English.",
        "operationId": "ProductController_getAllSupplierProducts",
        "parameters": [
          {
            "name": "souplierId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "accept-language",
            "required": false,
            "in": "header",
            "description": "Optional header to specify target language for translation (ar or en)",
            "schema": {
              "type": "string",
              "enum": [
                "ar",
                "en"
              ]
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "description": "Target language for translation",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of supplier products",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductResponseDto"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get all products of a supplier",
        "tags": [
          "Products"
        ]
      }
    },
    "/products/create-product-dto": {
      "get": {
        "deprecated": true,
        "description": "⚠️ IMPORTANT: This endpoint is a Swagger-only reference and does NOT exist in the real API.<br>\n            It is here solely so you can view the full CreateProductDto schema and example in the Swagger Schemas panel.<br>\n            You cannot actually call this endpoint, doing so will return nothing if attempted.<br><br>\n            Why does this exist?<br>\n            The real \"Create Product\" endpoint uses multipart/form-data to accept files and a JSON string,\n            which means Swagger cannot automatically show the CreateProductDto schema for that endpoint.<br>\n            This fake endpoint is a workaround to let you inspect the expected JSON structure, see required fields, \n            and understand how to format your requests when sending the 'dto' field as a JSON string in the real API.<br><br>\n            Use this purely as a reference to know:<br>\n            - All required and optional fields<br>\n            - Field types and valid values<br>\n            - Example data for testing<br><br>\n            DO NOT use this in your frontend code or try to send requests to it.<br>\n            Always send product data as a JSON string in the 'dto' field of the real multipart/form-data endpoint.",
        "operationId": "ProductController_dummy",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Fake body showing CreateProductDto",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProductDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "This endpoint returns nothing"
          }
        },
        "summary": "⚠️ ONLY for Swagger reference: shows CreateProductDto schema",
        "tags": [
          "Products"
        ]
      }
    },
    "/products/{productId}/clone": {
      "post": {
        "description": "Creates a copy of an existing product. The duplicated product is unpublished by default. Requires Supplier role.",
        "operationId": "ProductController_duplicateProduct",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Duplicated product details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Original product or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Product not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Duplicate a product",
        "tags": [
          "Products"
        ]
      }
    },
    "/products/{productId}/images": {
      "patch": {
        "description": "This endpoint allows the supplier to add an additional image to an already created product.<br>\n            Only the image is updated; product name, description, and other fields remain unchanged.<br>\n            Maximum 3 images per product are allowed.<br><br>\n            <strong>Note:</strong> The file must be an image (PNG, JPEG, WebP) and cannot exceed 5MB in size.<br>\n            <strong>IMPORTANT:</strong> Please ensure that uploaded images comply with Islamic laws. This means avoiding haram content such as music-related images, depictions of women's bodies (even hands), or any illustrations of living beings (humans, animals, etc.) whether drawn or digital.",
        "operationId": "ProductController_updateProductImages",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "The product image file (PNG, JPEG, WebP, max 5MB)"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The product with the newly added image is returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed or maximum image limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "A maximum of 3 product images is allowed",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier or product not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Product not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Add a new image to an existing product",
        "tags": [
          "Products"
        ]
      }
    },
    "/products/{productId}/image/{fileName}": {
      "delete": {
        "description": "Deletes a single image of a product. Requires at least one image to remain. Requires Supplier role.",
        "operationId": "ProductController_deleteProductImage",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fileName",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Updated product details after deletion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request (image not found or would leave product empty)",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "A product must have at least one image.",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Product or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Product not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Delete a specific product image",
        "tags": [
          "Products"
        ]
      }
    },
    "/suppliers/me": {
      "get": {
        "description": "Retrieves the supplier data of the authenticated user. Returns either full supplier data if active, or a minimal inactive DTO if the supplier is inactive.",
        "operationId": "SupplierController_getSupplierData",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved supplier profile.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/SupplierResponseDto"
                    },
                    {
                      "$ref": "#/components/schemas/InactiveSupplierResponseDto"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found for the given user.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier with id 9932-we432 not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get current supplier profile",
        "tags": [
          "Suppliers"
        ]
      },
      "patch": {
        "description": "Allows the authenticated supplier to update their profile information such as store status, store closed message, store bio, banner filename, and delivery fees. Only supplier-related fields can be updated.",
        "operationId": "SupplierController_updateSupplierData",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Supplier fields that can be updated.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSupplierDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Supplier profile updated successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupplierResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found for the given user.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier with id 9932-we432 not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Update current supplier profile",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers/me/store": {
      "get": {
        "description": "Retrieves the supplier data of the authenticated user. Returns either full supplier data if active, or a minimal inactive DTO if the supplier is inactive.",
        "operationId": "SupplierController_updateSupplierStoreData",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved supplier profile.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/SupplierResponseDto"
                    },
                    {
                      "$ref": "#/components/schemas/InactiveSupplierResponseDto"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found for the given user.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier with id 9932-we432 not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get current supplier profile",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers/me/favorite-categories": {
      "get": {
        "description": "Retrieves the list of favorite subcategories for the authenticated supplier. Each item contains the category ID and name.",
        "operationId": "SupplierController_getFavoriteCategories",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved favorite categories.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "number",
                        "example": 16
                      },
                      "name": {
                        "type": "string",
                        "example": "Animal Feed"
                      }
                    }
                  },
                  "example": [
                    {
                      "id": 16,
                      "name": "Animal Feed"
                    },
                    {
                      "id": 33,
                      "name": "Jewelry & Watches"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found when fetching favorite categories.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found when fetching favorite categories",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get supplier favorite categories",
        "tags": [
          "Suppliers"
        ]
      },
      "patch": {
        "description": "Adds a category to the supplier's favorite categories if not already present, or removes it if already present. Returns a message and updated favorite categories list.",
        "operationId": "SupplierController_toggleFavoriteCategory",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "categoryId": {
                    "type": "number",
                    "description": "The ID of the category to toggle in favorites",
                    "example": 16
                  }
                },
                "required": [
                  "categoryId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully toggled favorite category.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Category added to favorites."
                    },
                    "favoriteCategories": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "number",
                            "example": 16
                          },
                          "name": {
                            "type": "string",
                            "example": "Animal Feed"
                          }
                        }
                      },
                      "example": [
                        {
                          "id": 16,
                          "name": "Animal Feed"
                        },
                        {
                          "id": 33,
                          "name": "Jewelry & Watches"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid category ID provided or category does not exist.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Invalid category ID: abc123 (must be a number)",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Category with id 9999 does not exist",
                        "error": "Bad Request"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found.",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Toggle a favorite category for supplier",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers/me/plan": {
      "get": {
        "description": "Retrieves the current subscription plan of the authenticated supplier.",
        "operationId": "SupplierController_getSupplierPlan",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved supplier plan.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "plan": {
                      "type": "string",
                      "enum": [
                        "BASIC",
                        "PREMIUM"
                      ],
                      "example": "PREMIUM"
                    }
                  },
                  "example": {
                    "plan": "PREMIUM"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found.",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get current supplier plan",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers/me/subscripe-premium": {
      "post": {
        "description": "Upgrades the supplier account to the premium plan. Throws error if already on premium.",
        "operationId": "SupplierController_subscripePremium",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully subscribed to premium plan.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Successfully subscribed to the premium plan."
                    },
                    "plan": {
                      "type": "string",
                      "enum": [
                        "BASIC",
                        "PREMIUM"
                      ],
                      "example": "PREMIUM"
                    }
                  },
                  "example": {
                    "message": "Successfully subscribed to the premium plan.",
                    "plan": "PREMIUM"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Supplier is already subscribed to premium.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Supplier is already subscribed to premium.",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found.",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Subscribe to premium plan",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers/me/start-free-trail": {
      "post": {
        "description": "Starts the 30-day free trial for the supplier, upgrading to premium plan. Throws error if trial already used.",
        "operationId": "SupplierController_startFreeTrial",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully started free trial.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Free trial started successfully. You are now on the premium plan for 30 days."
                    },
                    "plan": {
                      "type": "string",
                      "enum": [
                        "BASIC",
                        "PREMIUM"
                      ],
                      "example": "PREMIUM"
                    }
                  },
                  "example": {
                    "message": "Free trial started successfully. You are now on the premium plan for 30 days.",
                    "plan": "PREMIUM"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Free trial has already been used.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Free trial has already been used.",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found.",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Start free trial",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers/me/store-banner": {
      "post": {
        "description": "Uploads a new store banner image for the authenticated supplier and updates their record.<br><strong>Note:</strong> The file must be an image (PNG, JPEG, WebP) and cannot exceed 5MB in size.<br><strong>IMPORTANT:</strong> Please ensure that uploaded images comply with Islamic laws. This means avoiding haram content such as music-related images, depictions of women's bodies (even hands), or any illustrations of living beings (humans, animals, etc.) whether drawn or digital.",
        "operationId": "SupplierController_updateStoreBanner",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Banner image file to upload"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Store banner updated successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Store banner updated successfully"
                    },
                    "storeBannerFileName": {
                      "type": "string",
                      "example": "banner123-uuid.png"
                    }
                  },
                  "example": {
                    "message": "Store banner updated successfully",
                    "storeBannerFileName": "banner123-uuid.png"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found.",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Update store banner",
        "tags": [
          "Suppliers"
        ]
      },
      "delete": {
        "description": "Deletes the current banner image for the supplier store.",
        "operationId": "SupplierController_deleteStoreBanner",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Store banner deleted successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Store banner deleted successfully"
                    }
                  },
                  "example": {
                    "message": "Store banner deleted successfully"
                  }
                }
              }
            }
          },
          "400": {
            "description": "No store banner to delete.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "No store banner to delete.",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found.",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Delete store banner",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers/{id}/store-banner": {
      "get": {
        "description": "Retrieves the signed URL of the store banner for a given supplier ID.",
        "operationId": "SupplierController_getStoreBanner",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved store banner URL.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "storeBannerFileUrl": {
                      "type": "string",
                      "format": "uri",
                      "example": "https://cdn.example.com/banners/banner123.png"
                    }
                  },
                  "example": {
                    "storeBannerFileUrl": "https://cdn.example.com/banners/banner123.png"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No store banner found for this store.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "No store banner found for this store.",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get store banner",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers": {
      "get": {
        "description": "Retrieves a list of all suppliers, with optional filters by status (active/inactive) and subscription (subscribed/unsubscribed). Each element in the list can be either a full supplier DTO if active, or minimal inactive DTO if inactive.",
        "operationId": "SupplierController_getAllSuppliers",
        "parameters": [
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "Filter suppliers by status",
            "schema": {
              "enum": [
                "active",
                "inactive"
              ],
              "type": "string"
            }
          },
          {
            "name": "subscription",
            "required": false,
            "in": "query",
            "description": "Filter suppliers by subscription plan",
            "schema": {
              "enum": [
                "subscribed",
                "unsubscribed"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of suppliers retrieved successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "oneOf": [
                      {
                        "$ref": "#/components/schemas/SupplierResponseDto"
                      },
                      {
                        "$ref": "#/components/schemas/InactiveSupplierResponseDto"
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "summary": "Get all suppliers",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers/{id}": {
      "get": {
        "description": "Retrieves full supplier data including profile, store, subscription, and favorite categories. Returns either full supplier DTO if active, or minimal inactive DTO if inactive.",
        "operationId": "SupplierController_getSupplierDataById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Unique ID of the supplier",
            "schema": {
              "example": "uuid-1234",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Supplier data retrieved successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/SupplierResponseDto"
                    },
                    {
                      "$ref": "#/components/schemas/InactiveSupplierResponseDto"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Supplier with the given ID not found.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier with id 9932-we432 not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get supplier data by ID",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/suppliers/{id}/store": {
      "get": {
        "description": "Retrieves storefront-specific data for a supplier, suitable for displaying public store pages.",
        "operationId": "SupplierController_getSupplierStoreDataById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Unique ID of the supplier",
            "schema": {
              "example": "uuid-1234",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Storefront data retrieved successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/StorefrontResponseDto"
                    },
                    {
                      "$ref": "#/components/schemas/InactiveSupplierResponseDto"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Supplier with the given ID not found.",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier with id 9932-we432 not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get supplier storefront data",
        "tags": [
          "Suppliers"
        ]
      }
    },
    "/services": {
      "get": {
        "description": "Fetches all services. Optional query or header <strong>lang</strong> can be provided to translate service name and description.\n                <ul>\n                    <li>Header: <strong>accept-language</strong></li>\n                    <li>Query: <strong>lang</strong></li>\n                </ul>\n                Defaults to English if not provided.",
        "operationId": "ServiceController_getAllServices",
        "parameters": [
          {
            "name": "accept-language",
            "required": false,
            "in": "header",
            "description": "Optional header to specify target language for translation (ar or en)",
            "schema": {
              "type": "string",
              "enum": [
                "ar",
                "en"
              ]
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "description": "Target language for translation",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of services",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ServiceResponseDto"
                  }
                }
              }
            }
          }
        },
        "summary": "Get all services",
        "tags": [
          "Services"
        ]
      },
      "post": {
        "description": "<strong>IMPORTANT:</strong> This endpoint requires sending the data as <u>multipart/form-data</u>.<br>\n                <strong>Note:</strong> Because this endpoint uses multipart/form-data, Swagger cannot directly show the CreateServiceDto schema here. \n                There is a separate Swagger-only endpoint (GET /create-service-dto) where you can view the full CreateServiceDto schema and example.<br><br>\n                You must send two fields:\n                <ul>\n                    <li><strong>dto</strong> (type: text) → JSON string of the service details (see example below). \n                        <br>Check the Swagger-only endpoint for full schema reference.</li>\n                    <li><strong>files</strong> → one or more image files (PNG, JPEG, WebP, max 5MB each, 1 to 10 files)</li>\n                </ul>\n                Only categories with <strong>usedFor=SERVICE</strong> can be assigned to services.<br><br>\n                <strong>Note:</strong> The file must be an image (PNG, JPEG, WebP) and cannot exceed 5MB in size.<br>\n                <strong>IMPORTANT:</strong> Please ensure that uploaded images comply with Islamic laws. This means avoiding haram content such as music-related images, depictions of women's bodies (even hands), or any illustrations of living beings (humans, animals, etc.) whether drawn or digital.",
        "operationId": "ServiceController_createService",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary",
                      "description": "Service images. 1 to 10 images allowed, formats: PNG, JPEG, WebP, max 5MB each."
                    }
                  },
                  "dto": {
                    "type": "string",
                    "description": "IMPORTANT: Must be a JSON string containing service details. The JSON structure should follow CreateServiceDto format. Check the Swagger-only endpoint GET /create-service-dto to see the full schema and example.",
                    "example": "{\"name\":\"Home Cleaning Service\",\"description\":\"Professional cleaning service for residential spaces.\",\"price\":99.99,\"isPriceNegotiable\":false,\"categoryId\":12,\"serviceAvailability\":[\"MONDAY\",\"WEDNESDAY\"],\"isPublished\":true}"
                  }
                },
                "required": [
                  "files",
                  "dto"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Service created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServiceResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request (JSON, category, or file issues)",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Invalid JSON in form field OR Category not valid for services OR At least one service image is required",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier or category not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Create a new service",
        "tags": [
          "Services"
        ]
      }
    },
    "/services/{serviceId}": {
      "get": {
        "description": "Fetches a single service by its ID. Optional query or header <strong>lang</strong> can be provided to translate service name and description.\n                Defaults to English if not provided.",
        "operationId": "ServiceController_getServiceById",
        "parameters": [
          {
            "name": "serviceId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "accept-language",
            "required": false,
            "in": "header",
            "description": "Optional header to specify target language for translation (ar or en)",
            "schema": {
              "type": "string",
              "enum": [
                "ar",
                "en"
              ]
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "description": "Target language for translation",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Service details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServiceResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Service not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Service with id 123 not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get service by ID",
        "tags": [
          "Services"
        ]
      },
      "patch": {
        "description": "Updates service fields (except images). Only provided fields will be updated. Requires Supplier role.",
        "operationId": "ServiceController_updateService",
        "parameters": [
          {
            "name": "serviceId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateServiceDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated service details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServiceResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request or invalid category",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Services must be assigned to a subcategory, not a main category",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Service or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Service not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Update a service",
        "tags": [
          "Services"
        ]
      },
      "delete": {
        "description": "Soft-deletes a service. Requires Supplier role.",
        "operationId": "ServiceController_deleteService",
        "parameters": [
          {
            "name": "serviceId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deletion confirmation",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Service deleted successfully"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Service or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Service not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Delete a service",
        "tags": [
          "Services"
        ]
      }
    },
    "/services/supplier/{supplierId}": {
      "get": {
        "description": "Fetches all services for a given supplier. Optional query or header <strong>lang</strong> can be provided to translate service name and description.",
        "operationId": "ServiceController_getAllSupplierServices",
        "parameters": [
          {
            "name": "souplierId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "accept-language",
            "required": false,
            "in": "header",
            "description": "Optional header to specify target language for translation (ar or en)",
            "schema": {
              "type": "string",
              "enum": [
                "ar",
                "en"
              ]
            }
          },
          {
            "name": "lang",
            "required": false,
            "in": "query",
            "description": "Target language for translation",
            "schema": {
              "enum": [
                "ar",
                "en"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of supplier services",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ServiceResponseDto"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Supplier not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get all services of a supplier",
        "tags": [
          "Services"
        ]
      }
    },
    "/services/create-service-dto": {
      "get": {
        "deprecated": true,
        "description": "⚠️ IMPORTANT: This endpoint is a Swagger-only reference and does NOT exist in the real API.<br>\n            It is here solely so you can view the full CreateServiceDto schema and example in the Swagger Schemas panel.<br>\n            You cannot actually call this endpoint, doing so will return nothing if attempted.<br><br>\n            Why does this exist?<br>\n            The real \"Create Service\" endpoint uses multipart/form-data to accept files and a JSON string,\n            which means Swagger cannot automatically show the CreateServiceDto schema for that endpoint.<br>\n            This fake endpoint is a workaround to let you inspect the expected JSON structure, see required fields, \n            and understand how to format your requests when sending the 'dto' field as a JSON string in the real API.<br><br>\n            Use this purely as a reference to know:<br>\n            - All required and optional fields<br>\n            - Field types and valid values<br>\n            - Example data for testing<br><br>\n            DO NOT use this in your frontend code or try to send requests to it.<br>\n            Always send product data as a JSON string in the 'dto' field of the real multipart/form-data endpoint.",
        "operationId": "ServiceController_dummy",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Fake body showing CreateServiceDto",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateServiceDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "This endpoint returns nothing"
          }
        },
        "summary": "⚠️ ONLY for Swagger reference: shows CreateServiceDto schema",
        "tags": [
          "Services"
        ]
      }
    },
    "/services/{serviceId}/clone": {
      "post": {
        "description": "Creates a copy of an existing service. The duplicated service is unpublished by default. Requires Supplier role.",
        "operationId": "ServiceController_duplicateService",
        "parameters": [
          {
            "name": "serviceId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Duplicated service details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServiceResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Original service or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Service not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Duplicate a service",
        "tags": [
          "Services"
        ]
      }
    },
    "/services/{serviceId}/images": {
      "patch": {
        "description": "This endpoint allows the supplier to add an additional image to an already created service.<br>\n            Only the image is updated; other fields remain unchanged.<br>\n            Maximum 3 images per service are allowed.<br><br>\n            <strong>Note:</strong> The file must be an image (PNG, JPEG, WebP) and cannot exceed 5MB in size.<br>\n            <strong>IMPORTANT:</strong> Please ensure that uploaded images comply with Islamic laws. This means avoiding haram content such as music-related images, depictions of women's bodies (even hands), or any illustrations of living beings (humans, animals, etc.) whether drawn or digital.",
        "operationId": "ServiceController_updateServiceImages",
        "parameters": [
          {
            "name": "serviceId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Service image file (PNG, JPEG, WebP, max 5MB)"
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Service with newly added image returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServiceResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed or max image limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "A maximum of 3 service images is allowed",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Service or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Service not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Add a new image to an existing service",
        "tags": [
          "Services"
        ]
      }
    },
    "/services/{serviceId}/image/{fileName}": {
      "delete": {
        "description": "Deletes a single image of a service. Requires at least one image to remain. Requires Supplier role.",
        "operationId": "ServiceController_deleteServiceImage",
        "parameters": [
          {
            "name": "serviceId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fileName",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Updated service details after deletion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ServiceResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request (image not found or would leave service empty)",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "A service must have at least one image.",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Service or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Service not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Delete a specific service image",
        "tags": [
          "Services"
        ]
      }
    },
    "/categories": {
      "get": {
        "description": "Returns all categories in the system, including nested subcategories. Optionally, filter by `usedFor` (products or services).",
        "operationId": "CategoryController_getAllCategories",
        "parameters": [
          {
            "name": "usedFor",
            "required": false,
            "in": "query",
            "description": "Filter categories by type",
            "schema": {
              "example": "products",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of all categories",
            "content": {
              "application/json": {
                "schema": {
                  "example": [
                    {
                      "id": 1,
                      "name": "Agricultural & Pet Supplies",
                      "usedFor": "PRODUCT",
                      "subcategories": [
                        {
                          "id": 2,
                          "name": "Animal Feed",
                          "usedFor": "PRODUCT",
                          "parentCategory": {
                            "id": 1,
                            "name": "Agricultural & Pet Supplies"
                          }
                        },
                        {
                          "id": 3,
                          "name": "Fertilizers",
                          "usedFor": "PRODUCT",
                          "parentCategory": {
                            "id": 1,
                            "name": "Agricultural & Pet Supplies"
                          }
                        },
                        {
                          "id": 4,
                          "name": "Pet Accessories & Toys",
                          "usedFor": "PRODUCT",
                          "parentCategory": {
                            "id": 1,
                            "name": "Agricultural & Pet Supplies"
                          }
                        },
                        {
                          "id": 5,
                          "name": "Pet Food & Treats",
                          "usedFor": "PRODUCT",
                          "parentCategory": {
                            "id": 1,
                            "name": "Agricultural & Pet Supplies"
                          }
                        }
                      ]
                    },
                    {
                      "id": 20,
                      "name": "Software & IT Solutions",
                      "usedFor": "SERVICE",
                      "subcategories": [
                        {
                          "id": 21,
                          "name": "Web & App Development",
                          "usedFor": "SERVICE",
                          "parentCategory": {
                            "id": 20,
                            "name": "Software & IT Solutions"
                          }
                        },
                        {
                          "id": 22,
                          "name": "IT & Cloud Services",
                          "usedFor": "SERVICE",
                          "parentCategory": {
                            "id": 20,
                            "name": "Software & IT Solutions"
                          }
                        }
                      ]
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Get all categories",
        "tags": [
          "Categories"
        ]
      }
    },
    "/categories/main": {
      "get": {
        "description": "Returns only the top-level categories (no parent) in the system, optionally filtered by `usedFor`.",
        "operationId": "CategoryController_getMainCategories",
        "parameters": [
          {
            "name": "usedFor",
            "required": false,
            "in": "query",
            "description": "Filter categories by type",
            "schema": {
              "example": "services",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of top-level categories",
            "content": {
              "application/json": {
                "schema": {
                  "example": [
                    {
                      "id": 1,
                      "name": "Agricultural & Pet Supplies",
                      "usedFor": "PRODUCT",
                      "subcategories": [
                        {
                          "id": 2,
                          "name": "Animal Feed",
                          "usedFor": "PRODUCT",
                          "parentCategory": {
                            "id": 1,
                            "name": "Agricultural & Pet Supplies"
                          }
                        },
                        {
                          "id": 3,
                          "name": "Fertilizers",
                          "usedFor": "PRODUCT",
                          "parentCategory": {
                            "id": 1,
                            "name": "Agricultural & Pet Supplies"
                          }
                        },
                        {
                          "id": 4,
                          "name": "Pet Accessories & Toys",
                          "usedFor": "PRODUCT",
                          "parentCategory": {
                            "id": 1,
                            "name": "Agricultural & Pet Supplies"
                          }
                        },
                        {
                          "id": 5,
                          "name": "Pet Food & Treats",
                          "usedFor": "PRODUCT",
                          "parentCategory": {
                            "id": 1,
                            "name": "Agricultural & Pet Supplies"
                          }
                        }
                      ]
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Get main (top-level) categories",
        "tags": [
          "Categories"
        ]
      }
    },
    "/categories/sub": {
      "get": {
        "description": "Returns only subcategories (categories that have a parent), optionally filtered by `usedFor`.",
        "operationId": "CategoryController_getSubCategories",
        "parameters": [
          {
            "name": "usedFor",
            "required": false,
            "in": "query",
            "description": "Filter subcategories by type",
            "schema": {
              "example": "products",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of subcategories",
            "content": {
              "application/json": {
                "schema": {
                  "example": [
                    {
                      "id": 2,
                      "name": "Animal Feed",
                      "usedFor": "PRODUCT",
                      "parentCategory": {
                        "id": 1,
                        "name": "Agricultural & Pet Supplies"
                      }
                    },
                    {
                      "id": 3,
                      "name": "Fertilizers",
                      "usedFor": "PRODUCT",
                      "parentCategory": {
                        "id": 1,
                        "name": "Agricultural & Pet Supplies"
                      }
                    },
                    {
                      "id": 21,
                      "name": "Web & App Development",
                      "usedFor": "SERVICE",
                      "parentCategory": {
                        "id": 20,
                        "name": "Software & IT Solutions"
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Get subcategories",
        "tags": [
          "Categories"
        ]
      }
    },
    "/categories/{id}": {
      "get": {
        "description": "Returns a single category by its ID, including its parent category and all nested subcategories.",
        "operationId": "CategoryController_getCategoryById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "query",
            "description": "The ID of the category to fetch",
            "schema": {
              "example": 1,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Category found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "id": 1,
                    "name": "Agricultural & Pet Supplies",
                    "usedFor": "PRODUCT",
                    "subcategories": [
                      {
                        "id": 2,
                        "name": "Animal Feed",
                        "usedFor": "PRODUCT",
                        "parentCategory": {
                          "id": 1,
                          "name": "Agricultural & Pet Supplies"
                        }
                      },
                      {
                        "id": 3,
                        "name": "Fertilizers",
                        "usedFor": "PRODUCT",
                        "parentCategory": {
                          "id": 1,
                          "name": "Agricultural & Pet Supplies"
                        }
                      },
                      {
                        "id": 4,
                        "name": "Pet Accessories & Toys",
                        "usedFor": "PRODUCT",
                        "parentCategory": {
                          "id": 1,
                          "name": "Agricultural & Pet Supplies"
                        }
                      },
                      {
                        "id": 5,
                        "name": "Pet Food & Treats",
                        "usedFor": "PRODUCT",
                        "parentCategory": {
                          "id": 1,
                          "name": "Agricultural & Pet Supplies"
                        }
                      }
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "description": "Category not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Category not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "summary": "Get category by ID",
        "tags": [
          "Categories"
        ]
      }
    },
    "/carts/me": {
      "get": {
        "description": "Fetches the currently active cart of the authenticated buyer, including suppliers, items, and totals. Throws 404 if no active cart exists.",
        "operationId": "CartController_getBuyerActiveCart",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Active cart retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No active cart found for this buyer",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "No active cart found for this buyer",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get active cart for buyer",
        "tags": [
          "Carts"
        ]
      },
      "delete": {
        "description": "Marks the buyer's cart as deleted. Once deleted, it cannot be retrieved as active.",
        "operationId": "CartController_deleteCart",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cart deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Cart deleted successfully"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Active cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "No active cart found for this buyer",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Delete entire cart",
        "tags": [
          "Carts"
        ]
      }
    },
    "/carts/me/items": {
      "post": {
        "description": "Adds a product to the buyer's active cart. If no cart exists, a new one is created. Items are grouped by supplier automatically.",
        "operationId": "CartController_addItem",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddCartItemDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item added to cart successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid supplier, input data, stock, or quantity not following case/min/max rules",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Supplier for this product not found",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Only 5 units available in stock",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Quantity must be in multiples of 5",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Quantity must be at least the minimum order quantity: 10",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Quantity must not exceed the maximum order quantity: 20",
                        "error": "Bad Request"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Buyer or product not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Product not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Add item to cart",
        "tags": [
          "Carts"
        ]
      }
    },
    "/carts/me/items/{itemId}": {
      "patch": {
        "description": "Updates the quantity of a specific item in the buyer's cart and recalculates totals. New quantity must follow product's case quantity, minimum order, and maximum order constraints.",
        "operationId": "CartController_updateItemQuantity",
        "parameters": [
          {
            "name": "itemId",
            "required": true,
            "in": "path",
            "description": "Cart Item ID",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "newQuantity": {
                    "type": "number",
                    "example": 3
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item quantity updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid supplier, input data, stock, or quantity not following case/min/max rules",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Supplier for this product not found",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Only 5 units available in stock",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Quantity must be in multiples of 5",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Quantity must be at least the minimum order quantity: 10",
                        "error": "Bad Request"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 400,
                        "message": "Quantity must not exceed the maximum order quantity: 20",
                        "error": "Bad Request"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Item not found in buyer cart",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Item not found in this cart",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Update item quantity in cart",
        "tags": [
          "Carts"
        ]
      },
      "delete": {
        "description": "Deletes a specific item from the buyer's cart. Removes supplier grouping if no items remain for that supplier.",
        "operationId": "CartController_removeItem",
        "parameters": [
          {
            "name": "itemId",
            "required": true,
            "in": "path",
            "description": "Cart Item ID",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Item removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Item or cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Item not found in this cart",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Remove item from cart",
        "tags": [
          "Carts"
        ]
      }
    },
    "/carts/me/suppliers/{supplierId}": {
      "delete": {
        "description": "Removes all items from a specific supplier in the cart. Deletes the cart if it was the last supplier.",
        "operationId": "CartController_removeSupplierFromCart",
        "parameters": [
          {
            "name": "supplierId",
            "required": true,
            "in": "path",
            "description": "Supplier ID",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Supplier removed successfully; updated cart returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier or cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 404,
                        "message": "Supplier not found in this cart",
                        "error": "Not Found"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 404,
                        "message": "Cart is now empty and has been deleted",
                        "error": "Not Found"
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Remove supplier (and its items) from cart",
        "tags": [
          "Carts"
        ]
      }
    },
    "/carts/me/checkout": {
      "post": {
        "description": "Finalizes the buyer's cart by creating orders for each supplier. Marks the cart as bought and returns checkout details.",
        "operationId": "CartController_checkoutCart",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cart checked out successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Paid successfully",
                    "checkoutId": "uuid-checkout-id",
                    "buyerId": "uuid-buyer-id",
                    "cartId": "uuid-cart-id",
                    "totalPaid": 250,
                    "orders": [
                      {
                        "id": "uuid-order-1",
                        "supplierId": "uuid-supplier-id",
                        "finalPrice": 150
                      },
                      {
                        "id": "uuid-order-2",
                        "supplierId": "uuid-supplier-id-2",
                        "finalPrice": 100
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Out-of-stock products in cart",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Product \"Wireless Headphones\" is out of stock. Remove it from the cart to proceed.",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Active cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "No active cart found for this buyer",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Checkout cart",
        "tags": [
          "Carts"
        ]
      }
    },
    "/orders/me": {
      "get": {
        "description": "Fetches orders for the authenticated user. \n                <ul>\n                    <li>If user role is <strong>BUYER</strong>, returns orders placed by the buyer.</li>\n                    <li>If user role is <strong>SUPPLIER</strong>, returns orders received by the supplier.</li>\n                </ul>",
        "operationId": "OrderController_getMyOrders",
        "parameters": [
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of orders",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/OrderResponseDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "User not found or orders not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "User not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get my orders",
        "tags": [
          "Orders"
        ]
      }
    },
    "/orders/{orderId}": {
      "get": {
        "description": "Fetches a single order by its ID. Only accessible by the buyer or supplier related to the order.",
        "operationId": "OrderController_getOrderById",
        "parameters": [
          {
            "name": "orderId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Order details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Order not found for this user",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Order not found for this buyer",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get order by ID",
        "tags": [
          "Orders"
        ]
      }
    },
    "/orders/{orderId}/status": {
      "patch": {
        "description": "Allows a supplier to update the status of an order. \n                <strong>Suppliers cannot set status to COMPLETED.</strong>",
        "operationId": "OrderController_updateOrderStatus",
        "parameters": [
          {
            "name": "orderId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "newStatus": {
                    "type": "string",
                    "enum": [
                      "PENDING",
                      "PROCESSING",
                      "SHIPPED"
                    ],
                    "description": "New order status (cannot be COMPLETED)",
                    "example": "PROCESSING"
                  }
                },
                "required": [
                  "newStatus"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Order status updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Order status updated successfully",
                    "newStatus": "PROCESSING"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid status or not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 400,
                    "message": "Invalid order status. Valid statuses: PENDING, PROCESSING, SHIPPED",
                    "error": "Bad Request"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Order or supplier not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Order not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Update order status",
        "tags": [
          "Orders"
        ]
      }
    },
    "/orders/{orderId}/confirm-delivery": {
      "patch": {
        "description": "Allows a buyer to confirm the delivery of their order. \n                Status will be updated to <strong>COMPLETED</strong>.",
        "operationId": "OrderController_confirmDelivery",
        "parameters": [
          {
            "name": "orderId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Delivery confirmed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "Order delivery confirmed successfully",
                    "newStatus": "COMPLETED"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Order or buyer not found",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 404,
                    "message": "Order not found",
                    "error": "Not Found"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Confirm delivery",
        "tags": [
          "Orders"
        ]
      }
    },
    "/demand-predictions/{productId}": {
      "get": {
        "description": "Generates a 3-month sales forecast for a specific product using Prophet (via the AI backend). Requires the supplier to be authenticated and subscribed to a plan higher than BASIC. Returns monthly demand predictions, forecast accuracy indicators, and a stocking recommendation.",
        "operationId": "DemandPredictionController_getPredictionForProduct",
        "parameters": [
          {
            "name": "productId",
            "required": true,
            "in": "path",
            "description": "ID of the product to generate demand prediction for",
            "schema": {
              "example": "uuid-product-id",
              "type": "string"
            }
          },
          {
            "name": "Cookie",
            "in": "header",
            "description": "JWT token must be set in the cookie named \"token\". Example: token=your_jwt_token_here",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Demand prediction generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DemandPredictionResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized: Token missing or invalid/expired.",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "No token found in cookies",
                        "error": "Unauthorized"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 401,
                        "message": "Invalid or expired token",
                        "error": "Unauthorized"
                      }
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Forbidden: You do not have access to this resource (role mismatch).",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 403,
                    "message": "You do not have access to this resource",
                    "error": "Forbidden"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Supplier or product not found",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "statusCode": 404,
                        "message": "Supplier not found",
                        "error": "Not Found"
                      }
                    },
                    {
                      "example": {
                        "statusCode": 404,
                        "message": "Product not found",
                        "error": "Not Found"
                      }
                    }
                  ]
                }
              }
            }
          },
          "502": {
            "description": "AI backend failed to return prediction",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "statusCode": 502,
                    "message": "Failed to get prediction from AI backend",
                    "error": "Bad Gateway"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          },
          {
            "cookie": []
          },
          {
            "cookie": []
          },
          {
            "bearer": []
          },
          {
            "token": []
          }
        ],
        "summary": "Get demand prediction for a product",
        "tags": [
          "Demand Predictions"
        ]
      }
    }
  },
  "info": {
    "title": "Silah Backend API Documentation",
    "description": "Use this documentation to explore, test, and understand the available API endpoints, their request/response structure, and any required parameters such as headers, cookies, or authentication tokens.",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "cookie": {
        "type": "apiKey",
        "in": "cookie",
        "name": "token"
      }
    },
    "schemas": {
      "SignupDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "example": "StrongPass123",
            "minLength": 8,
            "maxLength": 28,
            "description": "Password must contain at least one uppercase, one lowercase, and one number. Special characters (@, #, !, $) are optional."
          },
          "name": {
            "type": "string",
            "example": "John Doe"
          },
          "crn": {
            "type": "string",
            "example": "1234567890"
          },
          "businessName": {
            "type": "string",
            "example": "Acme Corp"
          },
          "city": {
            "type": "string",
            "example": "Riyadh"
          },
          "nid": {
            "type": "string",
            "example": "0987654321"
          },
          "categories": {
            "description": "List of main category IDs (must be a main category).",
            "example": [
              1,
              3
            ],
            "type": "array",
            "items": {
              "type": "number"
            }
          },
          "agreedToTerms": {
            "type": "boolean",
            "example": true
          }
        },
        "required": [
          "email",
          "password",
          "name",
          "crn",
          "businessName",
          "city",
          "nid",
          "categories",
          "agreedToTerms"
        ]
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email address (optional if CRN is provided)",
            "example": "user@example.com",
            "format": "email"
          },
          "crn": {
            "type": "string",
            "description": "User CRN number (10 digits, optional if email is provided)",
            "example": "1234567890",
            "pattern": "^\\d{10}$"
          },
          "password": {
            "type": "string",
            "description": "User password (8 to 28 characters)",
            "example": "P@ssw0rd123",
            "minLength": 8,
            "maxLength": 28
          },
          "emailOrCrnCheck": {
            "type": "boolean",
            "description": "Internal field to validate that either email or CRN is provided",
            "example": true,
            "readOnly": true
          }
        },
        "required": [
          "password",
          "emailOrCrnCheck"
        ]
      },
      "ResetPasswordDto": {
        "type": "object",
        "properties": {
          "newPassword": {
            "type": "string",
            "description": "The new password to replace the old one.",
            "example": "StrongPass123",
            "minLength": 8,
            "maxLength": 28
          }
        },
        "required": [
          "newPassword"
        ]
      },
      "UserResponseDTO": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "example": "clv70z13w0000unqoj4lcr8x4"
          },
          "tapCustomerId": {
            "type": "string",
            "example": "cus_13gdft5"
          },
          "name": {
            "type": "string",
            "example": "John Doe"
          },
          "email": {
            "type": "string",
            "example": "user@example.com"
          },
          "crn": {
            "type": "string",
            "example": "1234567890"
          },
          "businessName": {
            "type": "string",
            "example": "Acme Corp"
          },
          "role": {
            "type": "string",
            "enum": [
              "GUEST",
              "SUPPLIER",
              "BUYER"
            ],
            "example": "BUYER"
          },
          "city": {
            "type": "string",
            "example": "Riyadh"
          },
          "pfpFileName": {
            "type": "string",
            "example": "moon-3263ec71-3e92-441d-aadd-a57b4a99b2e2.jpeg",
            "description": "Profile picture file name in R2 bucket."
          },
          "pfpUrl": {
            "type": "string",
            "example": "https://gp-silah.d025be9440ae5eb8295c69a36497276a.r2.cloudflarestorage.com/gp-silah/moon.jpeg-30510246-41f7-4cff-a052-78bcc30f7301.jpeg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=...&X-Amz-Date=20250816T131236Z&X-Amz-Expires=3600&X-Amz-Signature=...",
            "description": "Signed URL from R2. Signed URLs expire 1 hour after creation.",
            "format": "uri"
          },
          "categories": {
            "example": [
              {
                "id": 5,
                "name": "Home & Living"
              },
              {
                "id": 14,
                "name": "Technical & Repair Services"
              }
            ],
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "isEmailVerified": {
            "type": "boolean",
            "example": true
          },
          "preferredLanguage": {
            "type": "string",
            "example": "ARA",
            "enum": [
              "AR",
              "EN"
            ]
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "example": "2025-07-04T7:31:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "example": "2025-07-05T14:48:00.000Z"
          }
        },
        "required": [
          "userId",
          "tapCustomerId",
          "name",
          "email",
          "crn",
          "businessName",
          "role",
          "city",
          "pfpFileName",
          "pfpUrl",
          "categories",
          "isEmailVerified",
          "preferredLanguage",
          "createdAt",
          "updatedAt"
        ]
      },
      "UpdateUserDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "John Doe",
            "maxLength": 25
          },
          "email": {
            "type": "string",
            "example": "user@example.com"
          },
          "newPassword": {
            "type": "string",
            "example": "StrongPass123",
            "minLength": 8,
            "maxLength": 28
          },
          "businessName": {
            "type": "string",
            "example": "Acme Corp",
            "maxLength": 50
          },
          "city": {
            "type": "string",
            "example": "Riyadh"
          },
          "preferredLanguage": {
            "type": "string",
            "example": "ARA",
            "enum": [
              "AR",
              "EN"
            ]
          },
          "categories": {
            "description": "List of category IDs (use IDs, not names).",
            "example": [
              5,
              14
            ],
            "type": "array",
            "items": {
              "type": "number"
            }
          }
        }
      },
      "CardDetailsDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Internal database ID of the card",
            "example": "f1a2b3c4-d5e6-7890-ab12-34567890cdef"
          },
          "tapCardId": {
            "type": "string",
            "description": "Tap payment gateway card ID",
            "example": "card_abc123xyz"
          },
          "cardHolderName": {
            "type": "string",
            "description": "Name of the card holder",
            "example": "Norah Alqahtani"
          },
          "last4": {
            "type": "string",
            "description": "Last 4 digits of the card",
            "example": "4242"
          },
          "brand": {
            "type": "string",
            "description": "Brand of the card (e.g., Visa, Mastercard)",
            "example": "Visa"
          },
          "expMonth": {
            "type": "number",
            "description": "Expiration month of the card (1-12)",
            "example": 12
          },
          "expYear": {
            "type": "number",
            "description": "Expiration year of the card (4-digit)",
            "example": 2028
          }
        },
        "required": [
          "id",
          "tapCardId",
          "cardHolderName",
          "last4",
          "brand",
          "expMonth",
          "expYear"
        ]
      },
      "BuyerResponseDto": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserResponseDTO"
          },
          "card": {
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/CardDetailsDto"
              }
            ]
          }
        },
        "required": [
          "user",
          "card"
        ]
      },
      "CreateCardDto": {
        "type": "object",
        "properties": {
          "tokenId": {
            "type": "string",
            "description": "Tap token id received from the frontend after card tokenization process (using Tap's Card SDK)",
            "example": "tok_TS57A39251831Q2B15Ro8l180"
          },
          "cardId": {
            "type": "string",
            "description": "Tap card id received from the frontend after card tokenization process (using Tap's Card SDK)",
            "example": "card_TS50A42252049msSJ23MV8k170"
          }
        },
        "required": [
          "tokenId",
          "cardId"
        ]
      },
      "ProductResponseDto": {
        "type": "object",
        "properties": {
          "productId": {
            "type": "string",
            "description": "Product ID",
            "example": "uuid-1234"
          },
          "supplierId": {
            "type": "object",
            "description": "Supplier ID (null = supplier deleated his account)",
            "example": "uuid-5678"
          },
          "supplier": {
            "description": "Supplier details (null if the supplier deleted their account)",
            "oneOf": [
              {
                "$ref": "#/components/schemas/SupplierResponseDto"
              },
              {
                "$ref": "#/components/schemas/InactiveSupplierResponseDto"
              }
            ],
            "nullable": true
          },
          "name": {
            "type": "string",
            "description": "Product name",
            "example": "Wireless Headphones"
          },
          "description": {
            "type": "string",
            "description": "Product description",
            "example": "Noise-cancelling over-ear headphones"
          },
          "price": {
            "type": "number",
            "description": "Price",
            "example": 199.99
          },
          "stock": {
            "type": "number",
            "description": "Stock available",
            "example": 50
          },
          "category": {
            "type": "object",
            "description": "Category info"
          },
          "imagesFilesNames": {
            "description": "Product images filenames",
            "example": [
              "img1.jpg",
              "img2.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "imagesFilesUrls": {
            "example": [
              "https://gp-silah.d025be9440ae5eb8295c69a36497276a.r2.cloudflarestorage.com/gp-silah/moon.jpeg-30510246-41f7-4cff-a052-78bcc30f7301.jpeg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=...&X-Amz-Date=20250816T131236Z&X-Amz-Expires=3600&X-Amz-Signature=..."
            ],
            "description": "Signed URLs from R2. Signed URLs expire 1 hour after creation.",
            "type": "array",
            "items": {
              "type": "string",
              "format": "uri"
            }
          },
          "caseQuantity": {
            "type": "number",
            "description": "Case quantity",
            "example": 1
          },
          "minOrderQuantity": {
            "type": "number",
            "description": "Minimum order quantity",
            "example": 1
          },
          "maxOrderQuantity": {
            "type": "object",
            "description": "Maximum order quantity (null = unlimited)",
            "nullable": true,
            "example": 50
          },
          "allowGroupPurchase": {
            "type": "boolean",
            "description": "Enable group purchase",
            "example": true
          },
          "minGroupOrderQuantity": {
            "type": "number",
            "description": "Minimum group order quantity",
            "nullable": true,
            "example": 5
          },
          "groupPurchasePrice": {
            "type": "number",
            "description": "Group purchase price",
            "nullable": true,
            "example": 149.99
          },
          "groupPurchaseDuration": {
            "type": "string",
            "description": "Group purchase duration (enum)",
            "nullable": true,
            "example": "FIVE_DAYS",
            "enum": [
              "THREE_DAYS",
              "FIVE_DAYS",
              "SEVEN_DAYS"
            ]
          },
          "isPublished": {
            "type": "boolean",
            "description": "Publish status",
            "example": true
          },
          "wishlistCount": {
            "type": "number",
            "description": "Wishlist count (only shown if supplier has PREMIUM plan)",
            "example": 10
          },
          "avgRating": {
            "type": "number",
            "description": "Average rating",
            "example": 4.5
          },
          "ratingsCount": {
            "type": "number",
            "description": "Ratings count",
            "example": 12
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Creation timestamp"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Last update timestamp"
          },
          "isDeleted": {
            "type": "boolean",
            "description": "Indicates if the product is soft-deleted",
            "example": false
          },
          "deletedAt": {
            "type": "object",
            "description": "Timestamp when the product was soft-deleted (null if not deleted)",
            "nullable": true
          }
        },
        "required": [
          "productId",
          "name",
          "description",
          "price",
          "stock",
          "category",
          "imagesFilesNames",
          "imagesFilesUrls",
          "caseQuantity",
          "minOrderQuantity",
          "maxOrderQuantity",
          "allowGroupPurchase",
          "minGroupOrderQuantity",
          "groupPurchasePrice",
          "groupPurchaseDuration",
          "isPublished",
          "avgRating",
          "ratingsCount",
          "createdAt",
          "updatedAt",
          "isDeleted",
          "deletedAt"
        ]
      },
      "ServiceResponseDto": {
        "type": "object",
        "properties": {
          "serviceId": {
            "type": "string",
            "description": "Service ID",
            "example": "uuid-1234"
          },
          "supplierId": {
            "type": "object",
            "description": "Supplier ID (null = supplier deleted his account)",
            "example": "uuid-5678"
          },
          "supplier": {
            "description": "Supplier details (null if the supplier deleted their account)",
            "oneOf": [
              {
                "$ref": "#/components/schemas/SupplierResponseDto"
              },
              {
                "$ref": "#/components/schemas/InactiveSupplierResponseDto"
              }
            ],
            "nullable": true
          },
          "name": {
            "type": "string",
            "description": "Service name",
            "example": "Home Cleaning"
          },
          "description": {
            "type": "string",
            "description": "Service description",
            "example": "Professional deep cleaning service for apartments and houses"
          },
          "price": {
            "type": "number",
            "description": "Price",
            "example": 150
          },
          "isPriceNegotiable": {
            "type": "boolean",
            "description": "Indicates if the price is negotiable",
            "example": true
          },
          "category": {
            "type": "object",
            "description": "Category info"
          },
          "imagesFilesNames": {
            "description": "Service images filenames",
            "example": [
              "cleaning1.jpg",
              "cleaning2.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "imagesFilesUrls": {
            "example": [
              "https://gp-silah.d025be9440ae5eb8295c69a36497276a.r2.cloudflarestorage.com/gp-silah/service1.jpeg?..."
            ],
            "description": "Signed URLs from R2. Signed URLs expire 1 hour after creation.",
            "type": "array",
            "items": {
              "type": "string",
              "format": "uri"
            }
          },
          "serviceAvailability": {
            "type": "string",
            "description": "Availability details of the service",
            "example": "WEEKENDS",
            "enum": [
              "TWENTY_FOUR_SEVEN",
              "EVERYDAY",
              "WEEKDAYS",
              "WEEKENDS",
              "APPOINTMENT"
            ]
          },
          "isPublished": {
            "type": "boolean",
            "description": "Publish status",
            "example": true
          },
          "wishlistCount": {
            "type": "number",
            "description": "Wishlist count (only shown if supplier has PREMIUM plan)",
            "example": 10
          },
          "avgRating": {
            "type": "number",
            "description": "Average rating",
            "example": 4.8
          },
          "ratingsCount": {
            "type": "number",
            "description": "Ratings count",
            "example": 25
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Creation timestamp"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Last update timestamp"
          },
          "isDeleted": {
            "type": "boolean",
            "description": "Indicates if the service is soft-deleted",
            "example": false
          },
          "deletedAt": {
            "type": "object",
            "description": "Timestamp when the service was soft-deleted (null if not deleted)",
            "nullable": true
          }
        },
        "required": [
          "serviceId",
          "name",
          "description",
          "price",
          "isPriceNegotiable",
          "category",
          "imagesFilesNames",
          "imagesFilesUrls",
          "serviceAvailability",
          "isPublished",
          "avgRating",
          "ratingsCount",
          "createdAt",
          "updatedAt",
          "isDeleted",
          "deletedAt"
        ]
      },
      "WishlistItemResponseDto": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "string",
            "description": "The ID of the wishlist item (which is the id of the product or service)",
            "example": "d4f2a1b0-1234-5678-9abc-1234567890ab"
          },
          "itemType": {
            "type": "string",
            "description": "The type of the item in the wishlist",
            "enum": [
              "PRODUCT",
              "SERVICE"
            ],
            "example": "PRODUCT"
          },
          "product": {
            "description": "The product details, present only if itemType is PRODUCT",
            "allOf": [
              {
                "$ref": "#/components/schemas/ProductResponseDto"
              }
            ]
          },
          "service": {
            "description": "The service details, present only if itemType is SERVICE",
            "allOf": [
              {
                "$ref": "#/components/schemas/ServiceResponseDto"
              }
            ]
          }
        },
        "required": [
          "itemId",
          "itemType"
        ]
      },
      "CreateProductDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Product name",
            "example": "Wireless Headphones",
            "maxLength": 60
          },
          "description": {
            "type": "string",
            "description": "Product description",
            "example": "Noise cancelling over-ear headphones",
            "maxLength": 1000
          },
          "price": {
            "type": "number",
            "description": "Product price",
            "example": 199.99
          },
          "stock": {
            "type": "number",
            "description": "Available stock (default = 0)",
            "example": 100
          },
          "categoryId": {
            "type": "number",
            "description": "Category ID",
            "example": 1
          },
          "caseQuantity": {
            "type": "number",
            "description": "Case quantity (default = 1)",
            "example": 4
          },
          "minOrderQuantity": {
            "type": "number",
            "description": "Minimum order quantity",
            "example": 10
          },
          "maxOrderQuantity": {
            "type": "object",
            "description": "Maximum order quantity",
            "example": 50
          },
          "allowGroupPurchase": {
            "type": "boolean",
            "description": "Enable group purchase (default = false)"
          },
          "minGroupOrderQuantity": {
            "type": "number",
            "description": "Minimum group order quantity (required if group purchase is enabled)",
            "example": 10
          },
          "groupPurchasePrice": {
            "type": "number",
            "description": "Group purchase price (required if group purchase is enabled)",
            "example": 149.99
          },
          "groupPurchaseDuration": {
            "type": "string",
            "enum": [
              "THREE_DAYS",
              "FIVE_DAYS",
              "SEVEN_DAYS"
            ],
            "description": "Group purchase duration (enum value)",
            "example": "SEVEN_DAYS"
          },
          "isPublished": {
            "type": "boolean",
            "description": "Publish status (default = false)"
          }
        },
        "required": [
          "name",
          "description",
          "price",
          "categoryId"
        ]
      },
      "UpdateProductDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Product name",
            "maxLength": 60
          },
          "description": {
            "type": "string",
            "description": "Product description",
            "maxLength": 1000
          },
          "price": {
            "type": "number",
            "description": "Product price",
            "example": 199.99
          },
          "stock": {
            "type": "number",
            "description": "Available stock",
            "example": 100
          },
          "categoryId": {
            "type": "number",
            "description": "Category ID",
            "example": 1
          },
          "caseQuantity": {
            "type": "number",
            "description": "Case quantity",
            "example": 1
          },
          "minOrderQuantity": {
            "type": "number",
            "description": "Minimum order quantity",
            "example": 1
          },
          "maxOrderQuantity": {
            "type": "object",
            "description": "Maximum order quantity (null = unlimited)",
            "example": 50
          },
          "allowGroupPurchase": {
            "type": "boolean",
            "description": "Enable group purchase",
            "example": false
          },
          "minGroupOrderQuantity": {
            "type": "number",
            "description": "Minimum group order quantity",
            "example": 5
          },
          "groupPurchasePrice": {
            "type": "number",
            "description": "Group purchase price",
            "example": 149.99
          },
          "groupPurchaseDuration": {
            "type": "string",
            "description": "Group purchase duration (enum)",
            "example": "ONE_WEEK",
            "enum": [
              "THREE_DAYS",
              "FIVE_DAYS",
              "SEVEN_DAYS"
            ]
          },
          "isPublished": {
            "type": "boolean",
            "description": "Publish status",
            "example": false
          }
        }
      },
      "UpdateSupplierDto": {
        "type": "object",
        "properties": {
          "storeStatus": {
            "type": "string",
            "enum": [
              "OPEN",
              "CLOSED"
            ],
            "description": "Current status of the supplier store",
            "example": "OPEN"
          },
          "storeClosedMsg": {
            "type": "string",
            "description": "Custom message displayed when the store is closed",
            "example": "We are closed for Eid holidays."
          },
          "storeBio": {
            "type": "string",
            "description": "Short bio or description of the store",
            "example": "We specialize in handmade bakery items."
          },
          "deliveryFees": {
            "type": "number",
            "description": "Delivery fees charged by the supplier",
            "example": 15.5
          }
        },
        "required": [
          "storeStatus"
        ]
      },
      "SupplierResponseDto": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserResponseDTO"
          },
          "supplierId": {
            "type": "string",
            "description": "Supplier unique ID",
            "example": "uuid-1234"
          },
          "supplierName": {
            "type": "string",
            "description": "Supplier display name",
            "example": "John Doe"
          },
          "supplierEmail": {
            "type": "string",
            "description": "Supplier email",
            "example": "john@gmail.com"
          },
          "businessName": {
            "type": "string",
            "description": "Business name of the user",
            "example": "John Bakery"
          },
          "city": {
            "type": "string",
            "description": "City of the user",
            "example": "Riyadh"
          },
          "storeStatus": {
            "type": "string",
            "enum": [
              "OPEN",
              "CLOSED"
            ],
            "description": "Current store status",
            "example": "OPEN"
          },
          "storeClosedMsg": {
            "type": "string",
            "description": "Message displayed if the store is closed",
            "example": "We are closed for Eid holidays."
          },
          "storeBio": {
            "type": "string",
            "description": "Short bio or description of the store",
            "example": "We specialize in handmade bakery items."
          },
          "storeBannerFileName": {
            "type": "string",
            "description": "File name of the store banner image in R2 bucket",
            "example": "banner123-6963ac71-3e92-441d-badd-a57b4a99b2e5.png"
          },
          "storeBannerFileUrl": {
            "type": "string",
            "description": "Signed URL from R2. Signed URLs expire 1 hour after creation.",
            "example": "https://cdn.example.com/banners/banner123.png",
            "format": "uri"
          },
          "deliveryFees": {
            "type": "number",
            "description": "Delivery fees charged by the supplier",
            "example": 15.5
          },
          "avgRating": {
            "type": "number",
            "description": "Average rating of the supplier",
            "example": 4.5
          },
          "ratingsCount": {
            "type": "number",
            "description": "Number of ratings received",
            "example": 23
          },
          "usedFreeTrail": {
            "type": "boolean",
            "description": "Indicates if the supplier used the free trial",
            "example": true
          },
          "supplierStatus": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ],
            "description": "Current status of the supplier account",
            "example": "ACTIVE"
          },
          "plan": {
            "type": "string",
            "enum": [
              "BASIC",
              "PREMIUM"
            ],
            "description": "Current plan of the supplier",
            "example": "PREMIUM"
          },
          "favoriteCategories": {
            "description": "List of favorite categories (only subcategories) for quick access",
            "example": [
              {
                "id": 16,
                "name": "Animal Feed"
              },
              {
                "id": 33,
                "name": "Jewelry & Watches"
              }
            ],
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        },
        "required": [
          "user",
          "supplierId",
          "supplierName",
          "supplierEmail",
          "businessName",
          "city",
          "storeStatus",
          "storeClosedMsg",
          "deliveryFees",
          "avgRating",
          "ratingsCount",
          "usedFreeTrail",
          "supplierStatus",
          "plan"
        ]
      },
      "CreateServiceDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Service name",
            "example": "Home Cleaning",
            "maxLength": 60
          },
          "description": {
            "type": "string",
            "description": "Service description",
            "example": "Professional deep cleaning service for apartments and houses",
            "maxLength": 1000
          },
          "price": {
            "type": "number",
            "description": "Service price",
            "example": 150
          },
          "isPriceNegotiable": {
            "type": "boolean",
            "description": "Indicates if the price is negotiable (default = false)",
            "example": true
          },
          "categoryId": {
            "type": "number",
            "description": "Category ID",
            "example": 1
          },
          "serviceAvailability": {
            "type": "string",
            "description": "Availability details of the service",
            "example": "TWENTY_FOUR_SEVEN",
            "enum": [
              "TWENTY_FOUR_SEVEN",
              "EVERYDAY",
              "WEEKDAYS",
              "WEEKENDS",
              "APPOINTMENT"
            ]
          },
          "isPublished": {
            "type": "boolean",
            "description": "Publish status (default = false)"
          }
        },
        "required": [
          "name",
          "description",
          "price",
          "categoryId",
          "serviceAvailability"
        ]
      },
      "UpdateServiceDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Service name",
            "maxLength": 60
          },
          "description": {
            "type": "string",
            "description": "Service description",
            "maxLength": 1000
          },
          "price": {
            "type": "number",
            "description": "Service price",
            "example": 150
          },
          "isPriceNegotiable": {
            "type": "boolean",
            "description": "Indicates if the price is negotiable",
            "example": true
          },
          "categoryId": {
            "type": "number",
            "description": "Category ID",
            "example": 1
          },
          "serviceAvailability": {
            "type": "string",
            "description": "Availability details of the service",
            "example": "EVERYDAY",
            "enum": [
              "TWENTY_FOUR_SEVEN",
              "EVERYDAY",
              "WEEKDAYS",
              "WEEKENDS",
              "APPOINTMENT"
            ]
          },
          "isPublished": {
            "type": "boolean",
            "description": "Publish status",
            "example": false
          }
        }
      },
      "CartItemResponseDto": {
        "type": "object",
        "properties": {
          "cartItemId": {
            "type": "number",
            "description": "Cart item ID",
            "example": 1
          },
          "productId": {
            "type": "string",
            "description": "Product ID",
            "example": "a1b2c3d4-5678-90ab-cdef-1234567890ab"
          },
          "productName": {
            "type": "string",
            "description": "Product name",
            "example": "Hair brushes"
          },
          "productPrice": {
            "type": "number",
            "description": "Product price",
            "example": 25
          },
          "quantity": {
            "type": "number",
            "description": "Quantity of the product",
            "example": 2
          },
          "itemTotalPrice": {
            "type": "number",
            "description": "Total price for this item (price * quantity)",
            "example": 50.5
          },
          "isAvailable": {
            "type": "boolean",
            "description": "Whether the product is currently available (stock >= quantity)",
            "example": true
          }
        },
        "required": [
          "cartItemId",
          "productId",
          "productName",
          "productPrice",
          "quantity",
          "itemTotalPrice",
          "isAvailable"
        ]
      },
      "CartBySupplierResponseDto": {
        "type": "object",
        "properties": {
          "cartBySupplierId": {
            "type": "string",
            "description": "CartBySupplier ID",
            "example": "f1e2d3c4-5678-90ab-cdef-1234567890ab"
          },
          "supplierId": {
            "type": "string",
            "description": "Supplier ID",
            "example": "z1x2c3v4-5678-90ab-cdef-1234567890ab"
          },
          "deliveryFee": {
            "type": "number",
            "description": "Delivery fee of this supplier",
            "example": 5
          },
          "subTotal": {
            "type": "number",
            "description": "Subtotal for this supplier's items (without delivery fee)",
            "example": 45.5
          },
          "supplierTotalPrice": {
            "type": "number",
            "description": "Total price including delivery fee",
            "example": 50.5
          },
          "cartItems": {
            "description": "Items from this supplier",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CartItemResponseDto"
            }
          }
        },
        "required": [
          "cartBySupplierId",
          "supplierId",
          "deliveryFee",
          "subTotal",
          "supplierTotalPrice",
          "cartItems"
        ]
      },
      "CartResponseDto": {
        "type": "object",
        "properties": {
          "cartId": {
            "type": "string",
            "description": "Cart ID",
            "example": "b1c2d3e4-5678-90ab-cdef-1234567890ab"
          },
          "buyerId": {
            "type": "string",
            "description": "Buyer ID",
            "example": "y1x2w3v4-5678-90ab-cdef-1234567890ab"
          },
          "productsTotal": {
            "type": "number",
            "description": "Total of all product prices in the cart",
            "example": 100
          },
          "deliveryFees": {
            "type": "number",
            "description": "Total delivery fees from all suppliers",
            "example": 10
          },
          "cartTotal": {
            "type": "number",
            "description": "Total cart price (productsTotal + deliveryFees)",
            "example": 110
          },
          "isBought": {
            "type": "boolean",
            "description": "Whether the cart has been checked out",
            "example": false
          },
          "suppliers": {
            "description": "List of suppliers with their items",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CartBySupplierResponseDto"
            }
          }
        },
        "required": [
          "cartId",
          "buyerId",
          "productsTotal",
          "deliveryFees",
          "cartTotal",
          "isBought",
          "suppliers"
        ]
      },
      "AddCartItemDto": {
        "type": "object",
        "properties": {
          "productId": {
            "type": "string",
            "description": "ID of the product to add to the cart",
            "example": "a1b2c3d4-5678-90ab-cdef-1234567890ab"
          },
          "quantity": {
            "type": "number",
            "description": "Quantity of the product to add (minimum 1)",
            "example": 2,
            "minimum": 1
          }
        },
        "required": [
          "productId",
          "quantity"
        ]
      },
      "OrderResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the order."
          },
          "checkoutId": {
            "type": "string",
            "description": "Identifier for the checkout session.<br>\n        Since a buyer can have items from multiple suppliers in a single cart, \n        each supplier will generate a separate order, but all share the same checkoutId."
          },
          "buyerId": {
            "type": "string",
            "description": "The ID of the buyer who placed this order. Nullable if the buyer account is deleted or unavailable."
          },
          "cartId": {
            "type": "string",
            "description": "The ID of the cart from which this order was created. Useful for tracing back to the original cart items and totals."
          },
          "supplierId": {
            "type": "string",
            "description": "The ID of the supplier fulfilling this order. Each order is tied to a single supplier even if multiple suppliers were in the cart."
          },
          "finalPrice": {
            "type": "number",
            "description": "The final price of this order. This includes the total cost of the items from the supplier plus any delivery fees."
          },
          "status": {
            "type": "string",
            "description": "Current status of the order. Values can be PENDING, PROCESSING, SHIPPED, or COMPLETED.",
            "enum": [
              "PENDING",
              "PROCESSING",
              "SHIPPED",
              "COMPLETED"
            ]
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Timestamp when the order was created. Useful for order history, tracking, and reporting."
          },
          "items": {
            "description": "The items included in this order, with their details such as product info, quantity, and total price for each item.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CartItemResponseDto"
            }
          },
          "buyer": {
            "description": "Buyer info for this order",
            "allOf": [
              {
                "$ref": "#/components/schemas/BuyerResponseDto"
              }
            ]
          },
          "supplier": {
            "description": "Supplier info for this order",
            "oneOf": [
              {
                "$ref": "#/components/schemas/SupplierResponseDto"
              },
              {
                "$ref": "#/components/schemas/InactiveSupplierResponseDto"
              }
            ]
          },
          "products": {
            "description": "List of products in this order",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductResponseDto"
            }
          }
        },
        "required": [
          "id",
          "checkoutId",
          "buyerId",
          "cartId",
          "supplierId",
          "finalPrice",
          "status",
          "createdAt",
          "items",
          "buyer",
          "supplier",
          "products"
        ]
      },
      "ForecastMonthDto": {
        "type": "object",
        "properties": {
          "month": {
            "type": "string",
            "example": "2025-01",
            "description": "The forecasted month in YYYY-MM format"
          },
          "demand": {
            "type": "number",
            "example": 120,
            "description": "Total predicted demand for this month"
          }
        },
        "required": [
          "month",
          "demand"
        ]
      },
      "DemandPredictionResponseDto": {
        "type": "object",
        "properties": {
          "product_id": {
            "type": "string",
            "example": "123",
            "description": "ID of the product being forecasted"
          },
          "forecast": {
            "description": "List of monthly demand predictions for the requested horizon",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ForecastMonthDto"
            }
          },
          "lowAccuracy": {
            "type": "boolean",
            "example": false,
            "description": "Indicates if the prediction accuracy is low (true when sales history < 50 days)"
          },
          "salesCount": {
            "type": "number",
            "example": 42,
            "description": "Total number of days of past sales data used in training"
          },
          "recommendedStock": {
            "type": "number",
            "example": 210,
            "description": "How many additional units supplier should stock to meet forecasted demand"
          }
        },
        "required": [
          "product_id",
          "forecast",
          "lowAccuracy",
          "salesCount",
          "recommendedStock"
        ]
      }
    }
  }
}